<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>nestjs-starter documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">nestjs-starter documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li
  >
  QueryConfig</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/common/helper/services/comman.query.ts</code>
        </p>




        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#name" 
>
                                            name
                                        </a>
                                </li>
                                <li>
                                        <a href="#syntax" 
>
                                            syntax
                                        </a>
                                </li>
                                <li>
                                        <a href="#type" 
>
                                            type
                                        </a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="name"></a>
                                        <span class="name "><b>name</b>
                                            <a href="#name">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>name:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="syntax"></a>
                                        <span class="name "><b>syntax</b>
                                            <a href="#syntax">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>syntax:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/function" target="_blank" >function</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="type"></a>
                                        <span class="name "><b>type</b>
                                            <a href="#type">
                                                <span class="icon ion-ios-link"></span>
                                            </a>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>type:         <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import * as _ from &#x27;lodash&#x27;;

/**
 * CommonQuery
 *
 * @description
 * A generic class to handle SQL queries for different models. It provides methods for
 * finding, inserting, updating, and deleting records using DTOs.
 */
export class CommonQuery1&lt;T&gt; {
    private model: string; // The name of the database table/model
    private allowedKeys: (keyof T)[]; // List of keys that can be used in queries

    /**
     * Constructor to initialize the CommonQuery class.
     * @param model - The name of the model/table for queries.
     * @param allowedKeys - The keys of the DTO that are allowed in queries.
     */
    constructor(model: string, allowedKeys: (keyof T)[]) {
        this.model &#x3D; model;
        this.allowedKeys &#x3D; allowedKeys;
    }

    /**
     * Generates a SQL query to find a record by ID.
     * @returns An object containing the query configuration for finding by ID.
     */
    findById(): object {
        return this.createQuery(
            &#x27;SELECT_ONE&#x27;,
            (id: number) &#x3D;&gt; &#x60;
            SELECT ${this.allowedKeys.join(&#x27;, &#x27;)}
            FROM ${this.model} AS main
            WHERE main.status &#x3D; 1 AND main.id &#x3D; ${this.formatValue(id)};
        &#x60;
        );
    }

    /**
     * Generates a SQL query to insert a new record.
     * @returns An object containing the query configuration for inserting a record.
     */
    insert(): object {
        return this.createQuery(&#x27;INSERT&#x27;, (dto: T) &#x3D;&gt; {
            const conds &#x3D; _.pick(dto, this.allowedKeys);
            const keys &#x3D; Object.keys(conds);
            const values &#x3D; keys.map((key) &#x3D;&gt; this.formatValue(conds[key]));

            return &#x60;
                INSERT INTO ${this.model} (${keys.join(&#x27;, &#x27;)})
                VALUES (${values.join(&#x27;, &#x27;)}) RETURNING *;
            &#x60;;
        });
    }

    /**
     * Generates a SQL query to update an existing record.
     * @returns An object containing the query configuration for updating a record.
     */
    update(): object {
        return this.createQuery(&#x27;UPDATE&#x27;, (dto: T) &#x3D;&gt; {
            const id &#x3D; _.get(dto, &#x27;id&#x27;);
            _.unset(dto, &#x27;id&#x27;); // Remove the ID for the update
            const updateData &#x3D; _.pick(dto, this.allowedKeys);

            const setClauses &#x3D; Object.entries(updateData)
                .map(([key, value]) &#x3D;&gt; &#x60;${key} &#x3D; ${this.formatValue(value)}&#x60;)
                .join(&#x27;, &#x27;);

            return &#x60;
                UPDATE ${this.model}
                SET ${setClauses}
                WHERE id &#x3D; ${this.formatValue(id)} RETURNING *;
            &#x60;;
        });
    }

    /**
     * Generates a SQL query to delete a record by ID.
     * @returns An object containing the query configuration for deleting a record.
     */
    delete(): object {
        return this.createQuery(
            &#x27;UPDATE&#x27;,
            (id: number) &#x3D;&gt; &#x60;
            UPDATE ${this.model}
            SET status &#x3D; 127
            WHERE id &#x3D; ${this.formatValue(id)} RETURNING *;
        &#x60;
        );
    }

    /**
     * Finds records with dynamic joins, automatically creating aliases for each table.
     * Allows specifying fields to select from joined tables.
     * @param joins - An array of objects containing the table name, join condition, join type, and selected fields.
     * @returns An object containing the query configuration for finding with joins.
     */
    findWithDynamicJoin(
        joins: Array&lt;{
            table: string;
            condition: string;
            type?: &#x27;JOIN&#x27; | &#x27;LEFT JOIN&#x27;;
            selectFields?: string[]; // Fields to select from the joined table
        }&gt;
    ): object {
        return this.createQuery(&#x27;SELECT_WITH_DYNAMIC_JOIN&#x27;, (id: number) &#x3D;&gt; {
            const fields &#x3D; this.allowedKeys.join(&#x27;, &#x27;);
            const joinClauses &#x3D; joins
                .map((join, index) &#x3D;&gt; {
                    const alias &#x3D; &#x60;table${index + 1}&#x60;; // Create an alias like table1, table2, etc.
                    const joinType &#x3D; join.type ? join.type : &#x27;JOIN&#x27;; // Default to INNER JOIN if no type is specified

                    // Select specific fields from the joined table
                    const selectFields &#x3D; join.selectFields
                        ? join.selectFields.map((field) &#x3D;&gt; &#x60;${alias}.${field}&#x60;).join(&#x27;, &#x27;)
                        : &#x27;&#x27;;
                    return &#x60;${joinType} ${join.table} AS ${alias} ON ${join.condition}${selectFields ? &#x60;, ${selectFields}&#x60; : &#x27;&#x27;}&#x60;;
                })
                .join(&#x27; &#x27;);

            return &#x60;
                SELECT ${fields}, ${joins.map((join, index) &#x3D;&gt; (join.selectFields ? join.selectFields.map((field) &#x3D;&gt; &#x60;table${index + 1}.${field}&#x60;).join(&#x27;, &#x27;) : &#x27;&#x27;)).join(&#x27;, &#x27;)}
                FROM ${this.model} AS main
                ${joinClauses}
                WHERE main.status &#x3D; 1 AND main.id &#x3D; ${this.formatValue(id)};
            &#x60;;
        });
    }

    /**
     * Creates a query object with a specific type and syntax generator.
     * @param type - The type of query (e.g., SELECT_ONE, INSERT).
     * @param syntaxGenerator - A function that generates the SQL syntax.
     * @returns An object containing the query configuration.
     */
    private createQuery(type: string, syntaxGenerator: (arg: any) &#x3D;&gt; string): object {
        return {
            name: type.toLowerCase(),
            type,
            syntax: syntaxGenerator,
        };
    }

    /**
     * Formats a value for safe SQL query insertion.
     * @param value - The value to format.
     * @returns A string representation of the formatted value.
     */
    private formatValue(value: any): string {
        if (Array.isArray(value)) {
            const formattedArray &#x3D; value.map((v) &#x3D;&gt; &#x60;&#x27;${v.replace(/&#x27;/g, &quot;&#x27;&#x27;&quot;)}&#x27;&#x60;).join(&#x27;, &#x27;);
            return &#x60;&#x27;{${formattedArray}}&#x27;&#x60;;
        } else if (typeof value &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
            return &#x60;&#x27;${value.replace(/&#x27;/g, &quot;&#x27;&#x27;&quot;)}&#x27;&#x60;;
        } else if (value &#x3D;&#x3D;&#x3D; null || value &#x3D;&#x3D;&#x3D; undefined) {
            return &#x27;NULL&#x27;;
        } else {
            return &#x60;${value}&#x60;; // For numbers and other types
        }
    }
    // commonQuery &#x3D; new CommonQuery&lt;YourDtoType&gt;(&#x27;your_table&#x27;, [&#x27;id&#x27;, &#x27;name&#x27;, &#x27;status&#x27;]);
    // queryConfig &#x3D; commonQuery.findWithDynamicJoin([
    //     {
    //         table: &#x27;another_table&#x27;,
    //         condition: &#x27;another_table.foreign_key &#x3D; main.id&#x27;,
    //         type: &#x27;LEFT JOIN&#x27;,
    //         selectFields: [&#x27;field1&#x27;, &#x27;field2&#x27;], // Specify fields to select from another_table
    //     },
    //     {
    //         table: &#x27;yet_another_table&#x27;,
    //         condition: &#x27;yet_another_table.foreign_key &#x3D; main.id&#x27;,
    //         selectFields: [&#x27;field3&#x27;, &#x27;field4&#x27;], // Specify fields to select from yet_another_table
    //     },
    // ]);
}
/**
 * CommonQuery
 *
 * @description
 * A generic class to handle SQL queries for different models. It provides methods for
 * finding, inserting, updating, and deleting records using DTOs.
 */

/**
 * CommonQuery
 *
 * @description
 * A generic class to handle SQL queries for different models. It provides methods for
 * finding, inserting, updating, and deleting records using DTOs.
 */
export class CommonQuery5&lt;T&gt; {
    private model: string; // The name of the database table/model
    private allowedKeys: (keyof T)[]; // List of keys that can be used in queries

    /**
     * Constructor to initialize the CommonQuery class.
     * @param model - The name of the model/table for queries.
     * @param allowedKeys - The keys of the DTO that are allowed in queries.
     */
    constructor(model: string, allowedKeys: (keyof T)[]) {
        this.model &#x3D; model;
        this.allowedKeys &#x3D; allowedKeys;
    }

    /**
     * Finds records with dynamic joins, automatically creating aliases for each table.
     * @param joins - An array of objects containing the table name, join condition, join type, and selected fields.
     * @returns An object containing the query configuration for finding with joins.
     */
    findWithDynamicJoin(
        joins: Array&lt;{
            table: string;
            condition: string; // Format: &#x27;foreign_key&#x3D;id&#x27;
            type?: &#x27;JOIN&#x27; | &#x27;LEFT JOIN&#x27;;
            selectFields?: string[]; // Fields to select from the joined table
        }&gt;
    ): object {
        return this.createQuery(&#x27;SELECT_WITH_DYNAMIC_JOIN&#x27;, (id: number) &#x3D;&gt; {
            const fields &#x3D; this.allowedKeys.join(&#x27;, &#x27;);
            const mainAlias &#x3D; &#x27;main&#x27;; // Alias for the main table
            const joinClauses &#x3D; joins
                .map((join, index) &#x3D;&gt; {
                    const joinAlias &#x3D; &#x60;table${index + 1}&#x60;; // Create an alias like table1, table2, etc.
                    const joinType &#x3D; join.type ? join.type : &#x27;JOIN&#x27;; // Default to INNER JOIN if no type is specified

                    // Split the condition to derive the join fields
                    const [foreignKey, mainField] &#x3D; join.condition
                        .split(&#x27;&#x3D;&#x27;)
                        .map((part) &#x3D;&gt; part.trim());
                    const condition &#x3D; &#x60;${join.table}.${foreignKey} &#x3D; ${mainAlias}.${mainField}&#x60;;

                    return &#x60;${joinType} ${join.table} AS ${joinAlias} ON ${condition}&#x60;;
                })
                .join(&#x27; &#x27;);

            return &#x60;
                SELECT ${fields}, 
                ${joins
                    .map((join, index) &#x3D;&gt; {
                        const alias &#x3D; &#x60;table${index + 1}&#x60;;
                        return join.selectFields
                            ? join.selectFields.map((field) &#x3D;&gt; &#x60;${alias}.${field}&#x60;).join(&#x27;, &#x27;)
                            : &#x27;&#x27;;
                    })
                    .filter((field) &#x3D;&gt; field)
                    .join(&#x27;, &#x27;)} 
                FROM ${this.model} AS ${mainAlias}
                ${joinClauses}
                WHERE ${mainAlias}.status &#x3D; 1 AND ${mainAlias}.id &#x3D; ${this.formatValue(id)};
            &#x60;;
        });
    }

    findWithDynamicJoin1(
        joins: Array&lt;{
            table: string;
            condition: string; // Format: &#x27;foreign_key&#x3D;id&#x27;
            type?: &#x27;JOIN&#x27; | &#x27;LEFT JOIN&#x27;;
            selectFields?: string[]; // Fields to select from the joined table
        }&gt;,
        additionalConditions?: string // Additional dynamic WHERE conditions
    ): QueryConfig {
        // Specify the return type
        return {
            name: &#x60;SELECT_WITH_DYNAMIC_JOIN&#x60;,
            type: &#x60;join&#x60;,
            syntax: (id: number) &#x3D;&gt; {
                // Accept id as a parameter
                const fields &#x3D; this.allowedKeys.join(&#x27;, &#x27;);
                const mainAlias &#x3D; &#x27;main&#x27;; // Alias for the main table
                const joinClauses &#x3D; joins
                    .map((join, index) &#x3D;&gt; {
                        const joinAlias &#x3D; &#x60;table${index + 1}&#x60;; // Create an alias like table1, table2, etc.
                        const joinType &#x3D; join.type ? join.type : &#x27;JOIN&#x27;; // Default to INNER JOIN if no type is specified

                        // Split the condition to derive the join fields
                        const [foreignKey, mainField] &#x3D; join.condition
                            .split(&#x27;&#x3D;&#x27;)
                            .map((part) &#x3D;&gt; part.trim());
                        const condition &#x3D; &#x60;${join.table}.${foreignKey} &#x3D; ${mainAlias}.${mainField}&#x60;;

                        return &#x60;${joinType} ${join.table} AS ${joinAlias} ON ${condition}&#x60;;
                    })
                    .join(&#x27; &#x27;);

                // Start building the WHERE clause
                const baseWhere &#x3D; &#x60;${mainAlias}.status &#x3D; 1 AND ${mainAlias}.id &#x3D; ${this.formatValue(id)}&#x60;;
                const dynamicWhere &#x3D; additionalConditions ? &#x60;AND ${additionalConditions}&#x60; : &#x27;&#x27;;

                return &#x60;
            SELECT ${fields}, 
            ${joins
                .map((join, index) &#x3D;&gt; {
                    const alias &#x3D; &#x60;table${index + 1}&#x60;;
                    return join.selectFields
                        ? join.selectFields.map((field) &#x3D;&gt; &#x60;${alias}.${field}&#x60;).join(&#x27;, &#x27;)
                        : &#x27;&#x27;;
                })
                .filter((field) &#x3D;&gt; field)
                .join(&#x27;, &#x27;)} 
            FROM ${this.model} AS ${mainAlias}
            ${joinClauses}
            WHERE ${baseWhere} ${dynamicWhere};
            &#x60;;
            },
        };
    }

    findWithDynamicJoin2(
        joins: Array&lt;{
            table: string;
            condition: string; // Format: &#x27;foreign_key&#x3D;id&#x27;
            type?: &#x27;JOIN&#x27; | &#x27;LEFT JOIN&#x27;;
            selectFields?: string[]; // Fields to select from the joined table
        }&gt;,
        additionalConditions?: string // Additional dynamic WHERE conditions
    ): QueryConfig {
        return {
            name: &#x60;SELECT_WITH_DYNAMIC_JOIN&#x60;,
            type: &#x60;join,&#x60;,
            syntax: () &#x3D;&gt; {
                const mainAlias &#x3D; &#x27;main&#x27;;
                // const fields &#x3D; this.allowedKeys.join(&#x27;, &#x27;);
                const fields &#x3D; this.allowedKeys
                    .map((field) &#x3D;&gt; &#x60;${mainAlias}.${String(field)}&#x60;) // Ensure conversion to string
                    .join(&#x27;, &#x27;); // Alias for the main table
                const joinClauses &#x3D; joins
                    .map((join, index) &#x3D;&gt; {
                        const joinAlias &#x3D; &#x60;table${index + 1}&#x60;; // Create an alias like table1, table2, etc.
                        const joinType &#x3D; join.type ? join.type : &#x27;JOIN&#x27;; // Default to INNER JOIN if no type is specified

                        // Split the condition to derive the join fields
                        const [foreignKey, mainField] &#x3D; join.condition
                            .split(&#x27;&#x3D;&#x27;)
                            .map((part) &#x3D;&gt; part.trim());
                        const condition &#x3D; &#x60;${joinAlias}.${foreignKey} &#x3D; ${mainAlias}.${mainField}&#x60;;

                        return &#x60;${joinType} ${join.table} AS ${joinAlias} ON ${condition}&#x60;;
                    })
                    .join(&#x27; &#x27;);

                // Start building the WHERE clause
                const baseWhere &#x3D; &#x60;${mainAlias}.status &#x3D; 1&#x60;;
                const dynamicWhere &#x3D; additionalConditions ? &#x60;AND ${additionalConditions}&#x60; : &#x27;&#x27;;

                return &#x60;
            SELECT ${fields}, 
            ${joins
                .map((join, index) &#x3D;&gt; {
                    const alias &#x3D; &#x60;table${index + 1}&#x60;;
                    return join.selectFields
                        ? join.selectFields.map((field) &#x3D;&gt; &#x60;${alias}.${field}&#x60;).join(&#x27;, &#x27;)
                        : &#x27;&#x27;;
                })
                .filter((field) &#x3D;&gt; field)
                .join(&#x27;, &#x27;)} 
            FROM ${this.model} AS ${mainAlias}
            ${joinClauses}
            WHERE ${baseWhere} ${dynamicWhere};
        &#x60;;
            },
        };
    }
    findWithDynamicJoin3(
        joins: Array&lt;{
            table: string;
            condition: string; // Format: &#x27;foreign_key&#x3D;id&#x27;
            type?: &#x27;JOIN&#x27; | &#x27;LEFT JOIN&#x27;;
            selectFields?: string[]; // Fields to select from the joined table
            additionalConditions?: string[]; // Additional conditions for this specific table
        }&gt;,
        baseAdditionalConditions?: string // Additional conditions for the main WHERE clause
    ): QueryConfig {
        return {
            name: &#x60;SELECT_WITH_DYNAMIC_JOIN&#x60;,
            type: &#x60;join&#x60;,
            syntax: () &#x3D;&gt; {
                const mainAlias &#x3D; &#x27;main&#x27;;
                const fields &#x3D; this.allowedKeys
                    .map((field) &#x3D;&gt; &#x60;${mainAlias}.${String(field)}&#x60;)
                    .join(&#x27;, &#x27;);

                const joinClauses &#x3D; joins
                    .map((join, index) &#x3D;&gt; {
                        const joinAlias &#x3D; &#x60;table${index + 1}&#x60;;
                        const joinType &#x3D; join.type ? join.type : &#x27;JOIN&#x27;;

                        const [foreignKey, mainField] &#x3D; join.condition
                            .split(&#x27;&#x3D;&#x27;)
                            .map((part) &#x3D;&gt; part.trim());
                        const condition &#x3D; &#x60;${joinAlias}.${foreignKey} &#x3D; ${mainAlias}.${mainField}&#x60;;

                        // Add dynamic conditions for the current join
                        const dynamicJoinConditions &#x3D; join.additionalConditions
                            ? join.additionalConditions
                                  .map((cond) &#x3D;&gt; &#x60;${joinAlias}.${cond}&#x60;)
                                  .join(&#x27; AND &#x27;)
                            : &#x27;&#x27;;

                        return &#x60;${joinType} ${join.table} AS ${joinAlias} ON ${condition}${dynamicJoinConditions ? &#x27; AND &#x27; + dynamicJoinConditions : &#x27;&#x27;}&#x60;;
                    })
                    .join(&#x27; &#x27;);

                // Base where clause
                const baseWhere &#x3D; &#x60;${mainAlias}.status &#x3D; 1&#x60;;
                const dynamicWhere &#x3D; baseAdditionalConditions
                    ? &#x60;AND ${baseAdditionalConditions}&#x60;
                    : &#x27;&#x27;;

                return &#x60;
            SELECT ${fields}, 
            ${joins
                .map((join, index) &#x3D;&gt; {
                    const alias &#x3D; &#x60;table${index + 1}&#x60;;
                    return join.selectFields
                        ? join.selectFields.map((field) &#x3D;&gt; &#x60;${alias}.${field}&#x60;).join(&#x27;, &#x27;)
                        : &#x27;&#x27;;
                })
                .filter((field) &#x3D;&gt; field)
                .join(&#x27;, &#x27;)} 
            FROM ${this.model} AS ${mainAlias}
            ${joinClauses}
            WHERE ${baseWhere} ${dynamicWhere};
        &#x60;;
            },
        };
    }

    /**
     * Creates a query object with a specific type and syntax generator.
     * @param type - The type of query (e.g., SELECT_ONE, INSERT).
     * @param syntaxGenerator - A function that generates the SQL syntax.
     * @returns An object containing the query configuration.
     */
    private createQuery(type: string, syntaxGenerator: (arg: any) &#x3D;&gt; string): object {
        return {
            name: type.toLowerCase(),
            type,
            syntax: syntaxGenerator, // This is a function
        };
    }

    // private createQuery(type: string, syntaxGenerator: (arg: any) &#x3D;&gt; string): object {
    //     return {
    //         name: type.toLowerCase(),
    //         type,
    //         syntax: syntaxGenerator,
    //     };
    // }

    /**
     * Formats a value for safe SQL query insertion.
     * @param value - The value to format.
     * @returns A string representation of the formatted value.
     */
    private formatValue(value: any): string {
        if (Array.isArray(value)) {
            const formattedArray &#x3D; value.map((v) &#x3D;&gt; &#x60;&#x27;${v.replace(/&#x27;/g, &quot;&#x27;&#x27;&quot;)}&#x27;&#x60;).join(&#x27;, &#x27;);
            return &#x60;&#x27;{${formattedArray}}&#x27;&#x60;;
        } else if (typeof value &#x3D;&#x3D;&#x3D; &#x27;string&#x27;) {
            return &#x60;&#x27;${value.replace(/&#x27;/g, &quot;&#x27;&#x27;&quot;)}&#x27;&#x60;;
        } else if (value &#x3D;&#x3D;&#x3D; null || value &#x3D;&#x3D;&#x3D; undefined) {
            return &#x27;NULL&#x27;;
        } else {
            return &#x60;${value}&#x60;; // For numbers and other types
        }
    }
    // commonQuery &#x3D; new CommonQuery&lt;YourDtoType&gt;(&#x27;your_table&#x27;, [&#x27;id&#x27;, &#x27;name&#x27;, &#x27;status&#x27;]);
    // queryConfig &#x3D; commonQuery.findWithDynamicJoin([
    //     {
    //         table: &#x27;another_table&#x27;,
    //         condition: &#x27;foreign_key&#x3D;id&#x27;, // Specify the join condition
    //         type: &#x27;LEFT JOIN&#x27;,
    //         selectFields: [&#x27;field1&#x27;, &#x27;field2&#x27;], // Specify fields to select from another_table
    //     },
    //     {
    //         table: &#x27;yet_another_table&#x27;,
    //         condition: &#x27;foreign_key&#x3D;id&#x27;, // Specify the join condition
    //         selectFields: [&#x27;field3&#x27;, &#x27;field4&#x27;], // Specify fields to select from yet_another_table
    //     },
    // ]);
}
interface QueryConfig {
    name: string;
    type: string;
    syntax: (id: number) &#x3D;&gt; string; // Method to generate SQL
}
</code></pre>
    </div>
</div>


                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'QueryConfig.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       
       <script type="module" src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
